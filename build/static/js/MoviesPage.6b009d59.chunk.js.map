{"version":3,"sources":["services/movies-api.js","components/Searchbar/Searchbar.module.css","components/Searchbar/icon.svg","components/Searchbar/Searchbar.js","components/MoviesPage/MoviesPage.js"],"names":["BASE_URL","KEY","fetchWithErrorHandling","a","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrendMovies","fetchMovieById","id","fetchCastById","fetchReviewsById","fetchMoviesByQuery","query","module","exports","_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgIcon","_ref","svgRef","title","titleId","props","fill","xmlns","viewBox","width","height","ref","d","ForwardRef","Searchbar","onSubmit","useState","searchValue","setSearchValue","className","s","event","preventDefault","trim","toast","SearchForm","type","SearchFormButton","SearchFormInput","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","autoClose","position","MoviesPage","newSearch","result","setResult","navigate","useNavigate","location","useLocation","state","pathname","search","URLSearchParams","get","handleSearchFormSubmit","useEffect","moviesAPI","then","data","results","map","el","to"],"mappings":"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","file":"static/js/MoviesPage.6b009d59.chunk.js","sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\r\nconst KEY = '9acbfb2c2d25c0e79e1c43f46316bf58';\r\n\r\nasync function fetchWithErrorHandling(url = '', config = {}) {\r\n  const response = await fetch(url, config);\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error('Not found'));\r\n}\r\n\r\nexport function fetchTrendMovies() {\r\n  return fetchWithErrorHandling(\r\n    `${BASE_URL}/trending/get-trending/week?api_key=${KEY}`,\r\n  );\r\n}\r\n\r\nexport function fetchMovieById(id) {\r\n  return fetchWithErrorHandling(`${BASE_URL}/movie/${id}?api_key=${KEY}`);\r\n}\r\n\r\nexport function fetchCastById(id) {\r\n  return fetchWithErrorHandling(\r\n    `${BASE_URL}/movie/${id}/credits?api_key=${KEY}`,\r\n  );\r\n}\r\n\r\nexport function fetchReviewsById(id) {\r\n  return fetchWithErrorHandling(\r\n    `${BASE_URL}/movie/${id}/reviews?api_key=${KEY}`,\r\n  );\r\n}\r\n\r\nexport function fetchMoviesByQuery(query) {\r\n  return fetchWithErrorHandling(\r\n    `${BASE_URL}/search/movie?api_key=${KEY}&query=${query}`,\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2B1xH\",\"SearchForm\":\"Searchbar_SearchForm__1mDky\",\"SearchFormButton\":\"Searchbar_SearchFormButton__10bug\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3njH_\"};","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    fill: \"#000000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 30 30\",\n    width: \"30px\",\n    height: \"30px\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 13 3 C 7.4889971 3 3 7.4889971 3 13 C 3 18.511003 7.4889971 23 13 23 C 15.396508 23 17.597385 22.148986 19.322266 20.736328 L 25.292969 26.707031 A 1.0001 1.0001 0 1 0 26.707031 25.292969 L 20.736328 19.322266 C 22.148986 17.597385 23 15.396508 23 13 C 23 7.4889971 18.511003 3 13 3 z M 13 5 C 17.430123 5 21 8.5698774 21 13 C 21 17.430123 17.430123 21 13 21 C 8.5698774 21 5 17.430123 5 13 C 5 8.5698774 8.5698774 5 13 5 z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIcon);\nexport default __webpack_public_path__ + \"static/media/icon.e0b696f3.svg\";\nexport { ForwardRef as ReactComponent };","import { useState } from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { ReactComponent as MyIcon } from './icon.svg';\r\nimport s from './Searchbar.module.css';\r\n\r\nconst Searchbar = ({ onSubmit }) => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n\r\n  const handleChange = event => {\r\n    setSearchValue(event.currentTarget.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    if (searchValue.trim() === '') {\r\n      toast('Enter your request');\r\n      return;\r\n    }\r\n    onSubmit(searchValue);\r\n    setSearchValue('');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={s.Searchbar}>\r\n        <form onSubmit={handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <MyIcon />\r\n          </button>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search movies\"\r\n            value={searchValue}\r\n            onChange={handleChange}\r\n          />\r\n        </form>\r\n      </div>\r\n      <ToastContainer autoClose={3000} position={'top-center'} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Searchbar;\r\n","import { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\n\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport * as moviesAPI from '../../services/movies-api';\r\n\r\nconst MoviesPage = ({ newSearch }) => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [result, setResult] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const location = useLocation();\r\n\r\n  // const path = location.pathname;\r\n\r\n  if (location.state === null) {\r\n    location.state = {\r\n      pathname: location.pathname,\r\n      search: location.search,\r\n    };\r\n  }\r\n\r\n  const search = new URLSearchParams(location.search).get('query') ?? '';\r\n\r\n  const handleSearchFormSubmit = value => {\r\n    setSearchValue(value);\r\n\r\n    navigate(`?query=${value}`);\r\n    // navigate(`?query=${value}`, {\r\n    //   state: {\r\n    //     pathname: path,\r\n    //     search: `?query=${value}`,\r\n    //   },\r\n    // });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (search !== searchValue) {\r\n      setSearchValue(search);\r\n    }\r\n    if (searchValue === '') {\r\n      return;\r\n    }\r\n\r\n    moviesAPI.fetchMoviesByQuery(searchValue).then(data => {\r\n      setResult(data.results);\r\n    });\r\n  }, [searchValue, search]);\r\n\r\n  if (result && result.length === 0) {\r\n    return (\r\n      <>\r\n        <Searchbar onSubmit={handleSearchFormSubmit} />\r\n        <p>No matches, try again!</p>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        <Searchbar onSubmit={handleSearchFormSubmit} />\r\n        <ul>\r\n          {result &&\r\n            result.map(el => (\r\n              <li key={el.id}>\r\n                <Link to={`/movies/${el.id}`} state={location.state}>\r\n                  {el.title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}